{"version":3,"file":"fiscalPlan.js","mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,CAA4B;AACW;AACvC;AACwC;AACsB;AACH;AACT;AACmB;AAC1C;AAC3B;AACmB;AACM;;;;;;;;;;;;;;;;;ACXzB,CAAoD;AACR;AAC6D;AACa;AACtH;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,qEAAmB;AAC7C;AACA;AACA;AACA,sBAAsB,uEAAqB;AAC3C,yBAAyB,0EAAwB;AACjD;AACA,QAAQ,CAAC;AACT;AACA,+BAA+B,CAAC;AAChC;AACA;AACA,gCAAgC,CAAC;AACjC;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC;AACL;AACA,YAAY,CAAC;AACb;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,WAAW;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,WAAW;AAChE;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,GAAG;AAC/D;AACA;AACA;AACA;AACA;AACA,+BAA+B,gDAAW;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,CAAC;AACb;AACA,iCAAiC,kDAAY;AAC7C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,IAAI,CAAC;AACL,mBAAmB,CAAC;AACpB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,CAAC;AACb;AACA;AACA;AACA,kCAAkC,iDAAW;AAC7C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,wDAAwD,UAAU;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oDAAc;AAC5C;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,0DAA0D,UAAU;AACpE;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,CAAC;AACb;AACA,oCAAoC,qDAAe;AACnD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,YAAY,CAAC;AACb;AACA;AACA,kCAAkC,oDAAc;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,uDAAiB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,yDAAa;AACtC;AACA;AACA,oDAAoD,WAAW;AAC/D;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,oDAAoD,WAAW,MAAM;AACrE,KAAK;AACL;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB,QAAQ,6TAAgE;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,CAAC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,CAAC;AACjB,yBAAyB,+CAAU;AACnC;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,kBAAkB,+DAA+D;AACjF,kBAAkB,oCAAoC;AACtD,kBAAkB,gCAAgC;AAClD,kBAAkB,0EAA0E;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,+BAA+B,QAAQ,2YAA4E;AACnI;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,yBAAyB,QAAQ,mXAAgE;AACjH;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iCAAiC,QAAQ,2TAAgF;AACzI;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC5fA,CAAQ;AACR;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACO;AACP;AACA;AACA;;;;;;;;;;;;ACjBA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA","sources":["webpack://thebudgeteer/../../../../../C\u0000# Academy Repos/CodeReviews.MVC.Budget/MVC.Budget.K-MYR/MVC.Budget.K-MYR/ClientApp/src/js/fiscalPlan-entry.js","webpack://thebudgeteer/../../../../../C\u0000# Academy Repos/CodeReviews.MVC.Budget/MVC.Budget.K-MYR/MVC.Budget.K-MYR/ClientApp/src/js/fiscalPlan.js","webpack://thebudgeteer/../../../../../C\u0000# Academy Repos/CodeReviews.MVC.Budget/MVC.Budget.K-MYR/MVC.Budget.K-MYR/ClientApp/src/js/utilities.js","webpack://thebudgeteer/../../../../../C\u0000# Academy Repos/CodeReviews.MVC.Budget/MVC.Budget.K-MYR/MVC.Budget.K-MYR/ClientApp/node_modules/bootstrap-datepicker/dist/css/bootstrap-datepicker3.min.css","webpack://thebudgeteer/../../../../../C\u0000# Academy Repos/CodeReviews.MVC.Budget/MVC.Budget.K-MYR/MVC.Budget.K-MYR/ClientApp/node_modules/bootstrap-icons/font/bootstrap-icons.css","webpack://thebudgeteer/../../../../../C\u0000# Academy Repos/CodeReviews.MVC.Budget/MVC.Budget.K-MYR/MVC.Budget.K-MYR/ClientApp/node_modules/datatables.net-bs5/css/dataTables.bootstrap5.min.css"],"sourcesContent":["﻿import 'jquery-validation';\r\nimport 'jquery-validation-unobtrusive';\r\n\r\nimport '../scss/bootstrap-imports.scss';\r\nimport 'datatables.net-bs5/css/dataTables.bootstrap5.min.css';\r\nimport 'country-select-js/build/css/countrySelect.min.css';\r\nimport 'bootstrap-icons/font/bootstrap-icons.css';\r\nimport 'bootstrap-datepicker/dist/css/bootstrap-datepicker3.min.css';\r\nimport '../scss/site.scss';\r\n\r\nimport './site.js';\r\nimport './fiscalPlan.js';\r\n","﻿import { API_ROUTES, PAGE_ROUTES } from './config';\r\nimport { shortestAngle } from './utilities';\r\nimport { importChartDefaults, importBootstrapModals, importBootstrapCollapses } from './asyncComponents';\r\nimport { postTransaction, putTransaction, deleteTransaction, postCategory, putCategory, deleteCategory } from './api';\r\n\r\nconst currentDate = new Date();\r\n\r\nconst fiscalPlanId = document.getElementById('fiscalPlan_Id');\r\nconst menu = document.getElementById('menu-container');\r\n\r\nconst chartDefaultsTask = importChartDefaults();\r\nconst homeDashboardPromise = getHomeDashboard(menu, fiscalPlanId.value, currentDate, JSON.parse(fiscalPlanId.dataset.object));\r\nconst statisticsDashboardPromise = getStatisticsDashboard(fiscalPlanId.value, currentDate);\r\nconst reevaluationDashboardPromise = getReevaluationDashboard();\r\nconst modalsPromise = importBootstrapModals();\r\nconst collapsesPromise = importBootstrapCollapses()\r\n    .then(() => {\r\n        $('.accordion-head').on('click', function (event) {\r\n            if (!event.target.classList.contains('add-category-icon')) {\r\n                let collapse = $(this).next();                \r\n                if (!collapse[0].classList.contains('collapsing')) {\r\n                    collapse.collapse('toggle');\r\n                    let caret = $('.accordion-caret', this)[0];\r\n                    caret.classList.toggle('rotate');\r\n                }\r\n            }\r\n        });\r\n    });\r\nconst transactionsTablePromise = getTransactionsTable();    \r\n\r\nsetupFlipContainer();\r\nsetupMenuHandlers(modalsPromise, homeDashboardPromise);\r\nsetupDataTableHandlers(transactionsTablePromise);\r\nsetupRerenderHandlers(homeDashboardPromise, statisticsDashboardPromise, reevaluationDashboardPromise, transactionsTablePromise);\r\n\r\nasync function setupRerenderHandlers(homeDBPromise, statisticsDBPromise, reevaluationDBPromise, tablePromise) {\r\n    var [homeDB, statisticsDB, reevaluationDB, transactionsTable] = await Promise.all(\r\n        [homeDBPromise, statisticsDBPromise, reevaluationDBPromise, tablePromise]\r\n    );\r\n    window.addEventListener('countryChanged', () => {\r\n        setTimeout(() => homeDB.formatDashboard(), 0);\r\n        setTimeout(() => reevaluationDB.formatDashboard(), 0);\r\n        setTimeout(() => statisticsDB.formatDashboard(), 0);\r\n        setTimeout(() => transactionsTable.rows().invalidate().draw(), 0);\r\n    })\r\n}\r\n\r\nasync function setupDataTableHandlers(tablePromise) {\r\n    var table = await tablePromise;\r\n\r\n    $('#search-form').on('submit', async function (event) {\r\n        event.preventDefault();\r\n        if ($(this).valid()) {\r\n            table.page(0);\r\n            table.ajax.reload(null, false);\r\n        }\r\n    });\r\n\r\n    var modals = await modalsPromise;\r\n    var updateTransactionModal = modals.find(m => m._element.id == 'updateTransaction-modal');\r\n    var deleteTransactionModal = modals.find(m => m._element.id == 'deleteTransaction-modal');\r\n\r\n    initUpdateTransactionModal(updateTransactionModal, table);\r\n    initDeleteTransactionModal(deleteTransactionModal, table);\r\n\r\n    var idUpdate= document.getElementById('updateTransaction_id');\r\n    var labelUpdate = document.getElementById('updateTransaction-label');\r\n    var title = document.getElementById('updateTransaction_title');\r\n    var dateTime = document.getElementById('updateTransaction_datetime');\r\n    var amount = document.getElementById('updateTransaction_amount');\r\n    var isHappy = document.getElementById('updateTransaction_isHappyTrue');\r\n    var isUnhappy = document.getElementById('updateTransaction_isHappyFalse');\r\n    var isNecessary = document.getElementById('updateTransaction_isNecessaryTrue');\r\n    var isUnnecessary = document.getElementById('updateTransaction_isNecessaryFalse');\r\n\r\n    var labelDelete = document.getElementById('deleteTransaction-label');\r\n    var idDelete = document.getElementById('deleteTransaction_id');     \r\n\r\n    table.on('click', 'svg', function (event) {\r\n        var row = table.row(event.target.closest('tr'));\r\n        var data = row.data();\r\n        switch (this.dataset.icon) {\r\n            case 'edit':                \r\n                idUpdate.value = data.id;\r\n                labelUpdate.textContent = `Edit '${data.title}'`;\r\n                title.value = data.title;\r\n                dateTime.value = data.dateTime.slice(0, 19);\r\n                amount.value = data.amount;\r\n                let element = data.isHappy ? isHappy : isUnhappy;\r\n                element.checked = true;\r\n                element = data.isNecessary ? isNecessary : isUnnecessary;\r\n                element.checked = true;\r\n                updateTransactionModal.show();\r\n                break;\r\n            case 'delete':\r\n                idDelete.value = data.id;\r\n                labelDelete.textContent = `Delete '${data.title}'`;\r\n                deleteTransactionModal.show();\r\n        }\r\n    });\r\n\r\n    var tableContainer = document.getElementById('table-container');\r\n    tableContainer.style = '';\r\n    table.columns.adjust();\r\n}\r\n\r\nasync function setupMenuHandlers(modalsPromise, homeDBPromise) {\r\n    var modals = await modalsPromise;\r\n    var homeDashboard = await homeDBPromise;    \r\n    var addCategoryModal = modals.find(m => m._element.id == 'addCategory-modal');\r\n    var updateCategoryModal = modals.find(m => m._element.id == 'updateCategory-modal');\r\n    var deleteCategoryModal = modals.find(m => m._element.id == 'deleteCategory-modal');\r\n    var addTransactionModal = modals.find(m => m._element.id == 'addTransaction-modal');\r\n\r\n    initAddCategoryModal(addCategoryModal, homeDashboard);\r\n    initUpdateCategoryModal(updateCategoryModal, homeDashboard);\r\n    initDeleteCategoryModal(deleteCategoryModal, homeDashboard);  \r\n    initAddTransactionModal(addTransactionModal, homeDashboard); \r\n\r\n    document.getElementById('close-menu').onclick = function () {\r\n        menu.classList.remove('active');\r\n        var id = menu.dataset.categoryid;\r\n        var borderBox = document.getElementById(`category_${id}`).querySelector('.border-animation');\r\n        borderBox.classList.remove('border-rotate');\r\n        menu.dataset.categoryid = 0;\r\n    }    \r\n    document.getElementById('details-menu').onclick = function () {\r\n        var id = menu.dataset.categoryid;\r\n        window.location.href = PAGE_ROUTES.CATEGORY(id);\r\n    }\r\n    homeDashboard.attachMenuHandlers();\r\n}\r\n\r\nfunction initAddCategoryModal(modal, homeDashboard) {\r\n    var addCategoryModalType = document.getElementById('addCategory_type');\r\n    var addCategoryModalFiscalPlanId = document.getElementById('addCategory_fiscalPlanId');\r\n    var form = document.getElementById('addCategory-form');\r\n    form.addEventListener('submit', async function (event) {\r\n        event.preventDefault();\r\n        if ($(this).valid()) {\r\n            modal.hide();\r\n            let category = await postCategory(new FormData(this));\r\n            if (category) {\r\n                homeDashboard.addCategory(category);\r\n            }\r\n        }\r\n    });\r\n\r\n    $('.add-category-icon').on('click', function () {\r\n        var type = $(this).closest('.accordion')[0].dataset.type;\r\n        addCategoryModalType.value = type;\r\n        addCategoryModalFiscalPlanId.value = fiscalPlanId.value;\r\n        modal.show();\r\n    });\r\n}\r\n\r\nfunction initUpdateCategoryModal(modal, homeDashboard) {\r\n    var updateCategoryModalLabel = document.getElementById('updateCategory-label');\r\n    var updateCategoryModalId = document.getElementById('updateCategory_id');\r\n    var updateCategoryModalName = document.getElementById('updateCategory_name');\r\n    var updateCategoryModalBudget = document.getElementById('updateCategory_budget');\r\n    var updateCategoryModalType = document.getElementById('updateCategory_type');\r\n    var updateCategoryModalFiscalPlanId = document.getElementById('updateCategory_fiscalPlanId');\r\n    var form = document.getElementById('updateCategory-form');\r\n    form.addEventListener('submit', async function (event) {\r\n        event.preventDefault();\r\n        if ($(this).valid()) {\r\n            modal.hide();\r\n            let month = homeDashboard.getCurrentMonth();\r\n            let formData = new FormData(this);\r\n            let isUpdated = await putCategory(formData, month);\r\n            if (isUpdated) {\r\n                homeDashboard.editCategory(formData, month);\r\n            }\r\n        }\r\n    });\r\n\r\n    var editIcon = document.getElementById('edit-menu');\r\n    editIcon.addEventListener('click', function () {\r\n        let data = homeDashboard.getCategory(menu.dataset.categoryid);\r\n        updateCategoryModalLabel.textContent = `Edit '${data.name}'`;\r\n        updateCategoryModalId.value = data.id;\r\n        updateCategoryModalName.value = data.name;\r\n        updateCategoryModalBudget.value = data.budgetLimit?.budget ?? data.budget;\r\n        updateCategoryModalType.value = data.categoryType;\r\n        updateCategoryModalFiscalPlanId.value = fiscalPlanId.value;\r\n        modal.show();\r\n    });\r\n}\r\n\r\nfunction initDeleteCategoryModal(modal, homeDashboard) {\r\n    var deleteCategoryModalLabel = document.getElementById('deleteCategory-label');\r\n    var deleteCategoryModalId = document.getElementById('deleteCategory_id');\r\n    var deleteCategoryModalType = document.getElementById('deleteCategory_type');\r\n    var form = document.getElementById('deleteCategory-form');\r\n    form.addEventListener('submit', async function (event) {\r\n        event.preventDefault();\r\n        modal.hide();\r\n        var formData = new FormData(this);\r\n        var id = parseInt(formData.get('Id'));\r\n        var type = parseInt(formData.get('Type'));\r\n        var token = formData.get('__RequestVerificationToken');\r\n        var isDeleted = await deleteCategory(id, type, token);\r\n        if (isDeleted) {\r\n            homeDashboard.removeCategory(id, type);\r\n            menu.classList.remove('active');\r\n            menu.dataset.categoryid = 0;\r\n        }\r\n    });\r\n    var deleteIcon = document.getElementById('delete-menu');\r\n    deleteIcon.addEventListener('click', function () {\r\n        var data = homeDashboard.getCategory(menu.dataset.categoryid);\r\n        deleteCategoryModalLabel.textContent = `Delete '${data.name}'`;\r\n        deleteCategoryModalType.value = data.categoryType;\r\n        deleteCategoryModalId.value = menu.dataset.categoryid;\r\n        modal.show();\r\n    });\r\n}\r\n\r\nfunction initAddTransactionModal(modal, homeDashboard) {\r\n    var addTransactionModalCategoryId = document.getElementById('addTransaction_categoryId');\r\n    var form = document.getElementById('addTransaction-form');\r\n    form.addEventListener('submit', async function (event) {\r\n        event.preventDefault();\r\n        if ($(this).valid()) {\r\n            modal.hide();\r\n            let transaction = await postTransaction(new FormData(this));\r\n\r\n            if (transaction) {\r\n                homeDashboard.addTransaction(transaction);\r\n            }\r\n        }\r\n    });\r\n\r\n    var addIcon = document.getElementById('add-menu');\r\n    addIcon.addEventListener('click', function () {\r\n        addTransactionModalCategoryId.value = menu.dataset.categoryid;\r\n        modal.show();\r\n    });\r\n}\r\n\r\nfunction initUpdateTransactionModal(modal, table) {\r\n    document.getElementById('updateTransaction-form').addEventListener('submit', async function (event) {\r\n        event.preventDefault();\r\n        if ($(this).valid()) {\r\n            modal.hide();\r\n            let formData = new FormData(this);\r\n            let isUpdated = await putTransaction(formData);\r\n            if (isUpdated) {\r\n                let row = table.row((_, data) => data.id === parseInt(formData.get('Id')));\r\n                if (row) {\r\n                    let data = row.data();\r\n                    data.amount = parseFloat(formData.get('Amount'));\r\n                    data.title = formData.get('Title');\r\n                    data.dateTime = formData.get('DateTime');\r\n                    data.isHappy = formData.get('IsHappy') === 'true';\r\n                    data.isNecessary = formData.get('IsNecessary') === 'true';\r\n                    data.isEvaluated = formData.get('IsEvaluated') === 'true';\r\n                    data.previousIsHappy = formData.get('PreviousIsHappy') === 'true';\r\n                    data.PreviousIsNecessary = formData.get('PreviousIsNecessary') === 'true';\r\n                    row.invalidate();\r\n                }              \r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nfunction initDeleteTransactionModal(modal, table) {\r\n    var form = document.getElementById('deleteTransaction-form');\r\n    form.addEventListener('submit', async function (event) {\r\n        event.preventDefault();\r\n        modal.hide();\r\n        var formData = new FormData(this);\r\n        var id = parseInt(formData.get('Id'));\r\n        var token = formData.get('__RequestVerificationToken');\r\n        var isDeleted = await deleteTransaction(id, token);\r\n        if (isDeleted) {\r\n            let row = table.row((_, data) => data.id === parseInt(formData.get('Id')));\r\n            if (row) {\r\n                row.remove().draw();\r\n            }    \r\n        }\r\n    });  \r\n}\r\n\r\nfunction setupFlipContainer() {\r\n    var faces = ['face_0', 'face_1', 'face_2', 'face_3'];\r\n    var flipContainer = document.getElementById('flip-container-inner');\r\n    var currentSideIndex = 0;\r\n    var currentDeg = 0;\r\n\r\n    $('#action-sidebar').on('click', '.sidebar-button-container', function () {\r\n        var index = parseInt(this.dataset.index);\r\n        if (currentSideIndex === index) {\r\n            return;\r\n        }\r\n\r\n        var currentFace = document.getElementById(faces[currentSideIndex]);\r\n        var nextFace = document.getElementById(faces[index]);\r\n\r\n        var degreeDiff = shortestAngle(currentSideIndex, index);\r\n        currentDeg += degreeDiff;\r\n\r\n        flipContainer.style = `transform: rotateY(${currentDeg}deg)`;\r\n        currentFace.classList.remove('visible-face');\r\n        nextFace.classList.add('visible-face');\r\n        currentSideIndex = index;\r\n    });\r\n\r\n    flipContainer.addEventListener('transitionend', () => {\r\n        currentDeg = currentDeg % 360;\r\n        flipContainer.style = `transform: rotateY(${currentDeg}deg); transition: transform 0s`;\r\n    });\r\n}\r\n\r\nasync function getTransactionsTable() {\r\n    try {\r\n        const { default: DataTable } = await import(/* webpackChunkName: \"datatables\" */'datatables.net-bs5');\r\n        var lastAjaxData = {\r\n            start: 0,     \r\n            lastId: null,\r\n            lastValue: null\r\n        };\r\n        var dataTable = new DataTable('#transactions-table', {\r\n            processing: true,\r\n            serverSide: true,\r\n            deferLoading: 0,\r\n            ajax: function (data, callback, settings) {\r\n                var formData = new FormData(document.getElementById('search-form'));\r\n                var table = new $.fn.dataTable.Api(settings);\r\n\r\n                var searchString = formData.get('SearchString');\r\n                var minDate = formData.get('MinDate');\r\n                var maxDate = formData.get('MaxDate');\r\n                var fiscalPlanId = formData.get('FiscalPlanId');\r\n                var categoryId = formData.get('CategoryId');\r\n                var minAmount = formData.get('MinAmount');\r\n                var maxAmount = formData.get('MaxAmount');\r\n\r\n                var isPrevious = false;\r\n                var lastId = null;\r\n                var lastValue = null;                \r\n                var orderBy = null;\r\n                var orderDirection = null;\r\n\r\n                if (data.order?.[0]) {\r\n                    orderBy = data.order[0].name;\r\n                    orderDirection = data.order[0].dir;\r\n                }\r\n\r\n                if (data.start !== 0) {\r\n                    let rowData = null;\r\n\r\n                    if (lastAjaxData.start !== data.start) {\r\n                        isPrevious = lastAjaxData.start > data.start;\r\n                        rowData = isPrevious ? table.row(':first').data() : table.row(':last').data();\r\n                    } else {\r\n                        lastId = lastAjaxData.lastId;\r\n                        lastValue = lastAjaxData.lastValue;\r\n                    }\r\n\r\n                    if (rowData) {\r\n                        lastId = rowData.id;\r\n                        if (orderBy) {\r\n                            lastValue = rowData[orderBy];\r\n                        }\r\n                    }\r\n                }\r\n                                \r\n                var requestData = {\r\n                    draw: data.draw,\r\n                    start: data.start,\r\n                    pageSize: data.length,\r\n                    orderBy: orderBy,\r\n                    orderDirection: orderDirection === 'asc' ? 0 : 1,\r\n                    lastId: lastId,\r\n                    lastValue: lastValue,\r\n                    isPrevious: isPrevious,\r\n                    FiscalPlanId: fiscalPlanId.length > 0 ? parseInt(fiscalPlanId) : null,\r\n                    SearchString: searchString.length > 0 ? searchString : null,\r\n                    CategoryId: categoryId.length > 0 ? parseInt(categoryId) : null,\r\n                    MinDate: minDate.length > 0 ? minDate: null,\r\n                    MaxDate: maxDate.length > 0 ? maxDate : null,\r\n                    MinAmount: minAmount.length > 0 ? parseFloat(minAmount) : null,\r\n                    MaxAmount: maxAmount.length > 0 ? parseFloat(maxAmount) : null\r\n                };\r\n                $.ajax({\r\n                    url: API_ROUTES.transactions.GET_SEARCH,\r\n                    type: 'POST',\r\n                    contentType: 'application/json',\r\n                    headers: {\r\n                        'RequestVerificationToken': formData.get('__RequestVerificationToken')\r\n                    },\r\n                    data: JSON.stringify(requestData),\r\n                    success: function (response) {\r\n                        callback({\r\n                            draw: response.draw,\r\n                            recordsFiltered: data.start + response.transactions.length + (response.hasNext === true ? 1 : 0),\r\n                            data: response.transactions\r\n                        });\r\n                        lastAjaxData = {\r\n                            start: requestData.start,\r\n                            lastId: requestData.lastId,\r\n                            lastValue: requestData.lastValue\r\n                        };                      \r\n                    },\r\n                    error: function (xhr, status, error) {\r\n                        console.error(`Couldn't fetch transactions'`, error);\r\n                    }\r\n                });\r\n              \r\n            },\r\n            info: false,\r\n            layout: {\r\n                topStart: null,\r\n                topEnd: null,\r\n                bottomStart: 'pageLength',\r\n                bottomEnd: {\r\n                    paging: {\r\n                        type: 'simple',\r\n                        numbers: false \r\n                    }\r\n                }\r\n            },\r\n            lengthMenu: [10, 25, 50, 100],\r\n            columns: [\r\n                { data: 'title', render: DataTable.render.text(), name: 'title' },\r\n                { data: 'dateTime', name: 'dateTime' },\r\n                { data: 'amount', name: 'amount' },\r\n                { data: 'category', render: DataTable.render.text(), name: 'category.name' },\r\n                {\r\n                    data: null,\r\n                    defaultContent:\r\n                    `<div class=\"d-flex justify-content-center align-items-center flex-wrap gap-2\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" class=\"table-icon\" fill=\"rgba(255, 255, 255, 1)\" data-icon=\"edit\">\r\n                            <use href=\"#edit-icon\" xlink:href=\"#edit-icon\"/>\r\n                        </svg >\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" class=\"table-icon\" viewBox=\"0 0 16 16\" fill=\"rgba(255, 255, 255, 1)\" data-icon=\"delete\">\r\n                            <use href=\"#trash-icon\" xlink:href=\"#trash-icon\"/>\r\n                        </svg>\r\n                    </div>`,\r\n                    targets: -1,\r\n                    sortable: false\r\n                },\r\n            ],\r\n            columnDefs: [{\r\n                targets: 2,\r\n                render: function (data, type, row) {\r\n                    if (type === 'display') {\r\n                        return window.userNumberFormat.format(data);\r\n                    } else {\r\n                        return data;\r\n                    }\r\n                }\r\n            }, {\r\n                targets: 1,\r\n                render: function (data, type, row) {\r\n                    if (type === 'display') {\r\n                        return new Date(data).toLocaleString(window.userLocale);\r\n                    } else {\r\n                        return data;\r\n                    }\r\n                }\r\n            }],\r\n            scrollX: true,\r\n            scrollCollapse: true\r\n        });      \r\n        return dataTable;\r\n    } catch (error) {\r\n        console.error('Error loading Datatable:', error);\r\n        throw error;\r\n    }\r\n}\r\n\r\nasync function getStatisticsDashboard(id, date) {\r\n    try {\r\n        const { default: StatisticsDashboard } = await import(/* webpackChunkName: \"statisticsDashboard\" */'./statisticsDashboard');\r\n        await chartDefaultsTask;\r\n\r\n        return new StatisticsDashboard(id, date);\r\n    } catch (error) {\r\n        console.error('Error loading statistics dashboard:', error);\r\n        throw error;\r\n    }    \r\n}\r\n\r\nasync function getHomeDashboard(menu, id, date, data) {\r\n    try {\r\n        const { default: HomeDashboard } = await import(/* webpackChunkName: \"homeDashboard\"*/ './homeDashboard');\r\n        await chartDefaultsTask;\r\n\r\n        return new HomeDashboard(menu, id, date, data);\r\n\r\n    } catch (error) {\r\n        console.error('Error loading home dashboard:', error);\r\n        throw error;\r\n    }\r\n} \r\n\r\nasync function getReevaluationDashboard() {\r\n    try {\r\n        const { default: ReevaluationDashboard } = await import(/* webpackChunkName: \"reevaluationDashboard\" */'./reevaluationDashboard');\r\n\r\n        return new ReevaluationDashboard();\r\n    } catch (error) {\r\n        console.error('Error loading reevaluation dashboard:', error);\r\n        throw error;\r\n    }    \r\n} \r\n","﻿export function shortestAngle(index1, index2) {\r\n    var diff = (index2 - index1 + 4) % 4;\r\n\r\n    if (diff === 1) {\r\n        return -90;\r\n    } else if (diff === 2) {\r\n        return -180;\r\n    } else if (diff === 3) {\r\n        return 90;\r\n    } else {\r\n        return 0;\r\n    }\r\n}\r\n\r\nexport function getColor(i) {\r\n    var colors = ['#e6194B', '#3cb44b', '#ffe119', '#4363d8', '#f58231', '#911eb4', '#42d4f4', '#f032e6', '#bfef45', '#fabed4', '#469990', '#dcbeff', '#9A6324', '#fffac8', '#800000', '#aaffc3', '#808000', '#ffd8b1', '#000075'];\r\n    return colors[i%19];\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};"],"names":[],"sourceRoot":""}