@model MVC.Budget.K_MYR.Models.HomeViewModel;

@{
    ViewData["Title"] = "Home Page";
}

<section>
    <div id="sidebar" class="sidebar collapsed">
        <svg id="sidebar-caret" class="sidebar-caret" width="30" height="35" fill="#ffffff" viewBox="0 0 15 15">
            <path d="M3.204 5h9.592L8 10.481zm-.753.659 4.796 5.48a1 1 0 0 0 1.506 0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 0 0-.753 1.659" />
        </svg>
        <div id="sidebar-container" class="sidebar-container">
            <div class="sidebar-category">
                <h5>Budget</h5>
                <ul>
                    <li>Add New Budget</li>
                    <li>Edit Budget</li>
                    <li>Delete Budget</li>
                </ul>
                <h5>Categories</h5>
                <ul>
                    <li data-bs-toggle="modal" data-bs-target="#add-category-modal">Add New Category</li>
                    <li>Edit Category</li>
                    <li>Delete Category</li>
                </ul>
                <h5>Display</h5>
                <ul>
                    <li>Locale</li>
                    <li>Currency</li>
                    <li>Other Settings</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<section>
    <div class="dashboard border mt-3">
        <p>Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard. Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard. Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard. Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard. Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard. Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard. Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard. Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard. Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.Here will be the dashboard.</p>
    </div>

    <div class="accordion my-2" id="group_1" data-id="1">
        <div class="accordion-item">
            <div id="accordion-head-income" class="accordion-head d-flex">
                <h5 class="accordion-header me-auto" id="accordionIncomeHeader">
                    Income
                </h5>
                <h5 class="accordion-header">
                    @Model.Income.Sum(c => c.Transactions.Sum(t => t.Amount)) / @Model.Income.Sum(c => c.Budget).ToString("G4")
                </h5>
                <img class="add-icon ms-auto" src="~/img/svg/plus.svg" alt="" width="20px;" />
                <div class="accordion-caret rotate"></div>
            </div>
            <div id="collapseIncome" class="accordion-collapse collapse show" aria-labelledby="accordionIncomeHeader">
                <div class="accordion-body">
                    @foreach (var category in Model.Income)
                    {
                        <div id="category_@category.Id" class="category p-2" data-id="@category.Id">
                            <div class="d-flex">
                                <div class="flex-grow-1">
                                    <div class="d-flex">
                                        <div>@category.Name</div>
                                        <div class="ms-auto">Balance: @category.Transactions.Sum(t => t.Amount) / @category.Budget.ToString("G4")</div>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-striped progress-bar-animated bg-success" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>
                                <div class="delete-icon ms-2">
                                    @Html.AntiForgeryToken()
                                    <img src="~/img/svg/trash_white.svg" width="25px" alt="" />
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>

    <div class="accordion my-2" id="group_2" data-id="2">
        <div class="accordion-item">
            <div id="accordion-head-expenses" class="accordion-head d-flex">
                <h5 class="accordion-header me-auto" id="accordionExpensesHeader">
                    Expenses
                </h5>
                <h5 class="accordion-header">
                    @Model.Expenses.Sum(c => c.Transactions.Sum(t => t.Amount)) / @Model.Expenses.Sum(c => c.Budget).ToString("G4")
                </h5>
                <img class="add-icon ms-auto" src="~/img/svg/plus.svg" alt="" width="20px;" />
                <div class="accordion-caret rotate"></div>
            </div>
            <div id="collapseExpenses" class="accordion-collapse collapse show" aria-labelledby="accordionExpensesHeader">
                <div class="accordion-body">
                    @foreach (var category in Model.Expenses)
                    {
                        <div class="category p-2">
                            <div class="d-flex">
                                <div class="flex-grow-1">
                                    <div class="d-flex">
                                        <div>@category.Name</div>
                                        <div class="ms-auto">Balance: @category.Transactions.Sum(t => t.Amount) / @category.Budget.ToString("G4")</div>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-striped progress-bar-animated bg-success" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>
                                <img class="ms-2" src="~/img/svg/trash_white.svg" width="25px" alt="" />
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>

    <div class="accordion my-2" id="group_3" data-id="3">
        <div class="accordion-item">
            <div id="accordion-head-savings" class="accordion-head d-flex">
                <h5 class="accordion-header me-auto" id="accordionSavingsHeader">
                    Savings
                </h5>
                <h5 class="accordion-header">
                    @Model.Savings.Sum(c => c.Transactions.Sum(t => t.Amount)) / @Model.Savings.Sum(c => c.Budget).ToString("G4")
                </h5>
                <img class="add-icon ms-auto" src="~/img/svg/plus.svg" alt="" width="20px;" />
                <div class="accordion-caret rotate"></div>
            </div>
            <div id="collapseSavings" class="accordion-collapse collapse show" aria-labelledby="accordionSavingsHeader">
                <div class="accordion-body">
                    @foreach (var category in Model.Savings)
                    {
                        <div class="category p-2">
                            <div class="d-flex">
                                <div class="flex-grow-1">
                                    <div class="d-flex">
                                        <div>@category.Name</div>
                                        <div class="ms-auto">Balance: @category.Transactions.Sum(t => t.Amount) / @category.Budget.ToString("G4")</div>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-striped progress-bar-animated bg-success" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>
                                <img class="ms-2" src="~/img/svg/trash_white.svg" width="25px" alt="" />
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>

</section>

@await Html.PartialAsync("_Modals", Model.Category)

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
